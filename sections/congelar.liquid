{% schema %}
{
  "name": "Freeze Overlay",
  "tag": "section",
  "class": "shopify-section",
  "settings": [],
  "presets": [
    {
      "name": "Freeze Overlay",
      "category": "Efectos visuales"
    }
  ]
}
{% endschema %}

<style>
  .frost-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 9999;
    pointer-events: none;
    background: radial-gradient(ellipse at center,
      rgba(180, 220, 255, 0.05) 0%,
      rgba(180, 220, 255, 0.12) 35%,
      rgba(140, 190, 255, 0.25) 65%,
      rgba(120, 170, 255, 0.3) 100%);
  }

  .frost::before,
  .frost::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    animation: fadein 1.2s forwards;
    z-index: 2;
    pointer-events: none;
  }

  .frost::before {
    background: linear-gradient(to right,
      rgba(180, 220, 255, 0.12) 0%,
      rgba(180, 220, 255, 0) 30%,
      rgba(180, 220, 255, 0) 70%,
      rgba(180, 220, 255, 0.12) 100%);
  }

  .frost::after {
    background: linear-gradient(to top,
      rgba(180, 220, 255, 0.15) 0%,
      rgba(180, 220, 255, 0) 50%,
      rgba(180, 220, 255, 0.15) 100%);
  }

  @keyframes fadein {
    from { opacity: 0; }
    to { opacity: 1; }
  }
</style>

<div class="frost-overlay" id="frostContainer">
  <div class="frost">
    <svg width="100%" height="100%" viewBox="0 0 1920 1080" preserveAspectRatio="none">
      <defs>
        <filter id="frostEffect">
          <feTurbulence type="fractalNoise" baseFrequency="0.006" numOctaves="4" result="noise" />
          <feColorMatrix type="matrix" in="noise" result="frost"
            values="0.2 0.2 0.6 0 0
                    0.2 0.2 0.6 0 0
                    0.2 0.2 0.6 0 0
                    0    0    0  0.4 0"/>
          <feComponentTransfer>
            <feFuncA type="linear" slope="0">
              <animate attributeName="slope" values="0;1" dur="1s" fill="freeze" />
            </feFuncA>
          </feComponentTransfer>
        </filter>
      </defs>
      <rect x="0" y="0" width="100%" height="100%" fill="transparent" filter="url(#frostEffect)" />
    </svg>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const btn = document.querySelector('#btn-congelar');
    const frost = document.getElementById('frostContainer');

    if (btn && frost) {
      btn.addEventListener('click', function () {
        frost.style.display = 'block';

        // Ocultar efecto automáticamente después de 2.5 segundos
        setTimeout(() => {
          frost.style.display = 'none';
        }, 2500);
      });
    }
  });
</script>
