{% schema %}
{
  "name": "Freeze Sides",
  "tag": "section",
  "class": "shopify-section",
  "settings": [],
  "presets": [
    {
      "name": "Freeze Sides",
      "category": "Efectos visuales"
    }
  ]
}
{% endschema %}

<style>
  .freeze-side {
    position: fixed;
    top: 0;
    width: 15vw;
    height: 100vh;
    z-index: 9999;
    pointer-events: none;
    display: none;
    background: rgba(180, 220, 255, 0.05);
  }

  .freeze-side.left {
    left: 0;
  }

  .freeze-side.right {
    right: 0;
  }

  .freeze-side svg {
    width: 100%;
    height: 100%;
  }

  .freeze-side.active {
    display: block;
    animation: fadein 1s ease-in forwards;
  }

  @keyframes fadein {
    0% { opacity: 0; }
    100% { opacity: 1; }
  }
</style>

<div class="freeze-side left" id="freezeLeft">
  <svg viewBox="0 0 1920 1080" preserveAspectRatio="none">
    <defs>
      <filter id="frostEffect">
        <feTurbulence type="fractalNoise" baseFrequency="0.005" numOctaves="5" result="noise" />
        <feColorMatrix type="matrix" in="noise" result="frost"
          values="0.2 0.2 0.6 0 0
                  0.2 0.2 0.6 0 0
                  0.2 0.2 0.6 0 0
                  0    0    0  0.6 0"/>
        <feComponentTransfer>
          <feFuncA type="linear" slope="0">
            <animate attributeName="slope" values="0;1" dur="0.8s" fill="freeze" />
          </feFuncA>
        </feComponentTransfer>
      </filter>
    </defs>
    <rect x="0" y="0" width="100%" height="100%" fill="rgba(180, 220, 255, 0.15)" filter="url(#frostEffect)"/>
  </svg>
</div>

<div class="freeze-side right" id="freezeRight">
  <svg viewBox="0 0 1920 1080" preserveAspectRatio="none">
    <use href="#frostEffect"/>
    <rect x="0" y="0" width="100%" height="100%" fill="rgba(180, 220, 255, 0.15)" filter="url(#frostEffect)"/>
  </svg>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const btn = document.querySelector('#btn-congelar');
    const left = document.getElementById('freezeLeft');
    const right = document.getElementById('freezeRight');

    if (btn && left && right) {
      btn.addEventListener('click', function () {
        left.classList.add('active');
        right.classList.add('active');

        // ❄️ Se quita el efecto después de 2.5 segundos
        setTimeout(() => {
          left.classList.remove('active');
          right.classList.remove('active');
        }, 2500);
      });
    }
  });
</script>
