{% if page.metafields.custom.cat_logo_pdf != blank %}
  {% assign pdf_url = page.metafields.custom.cat_logo_pdf | file_url %}
{% else %}
  {% assign pdf_url = "" %}
{% endif %}


<!-- üìå Contenedor del FlipBook -->
<div id="flipbookContainer">
  {% if pdf_url != "" %}
    <div class="flip-book" id="myFlipbook" pdf="{{ pdf_url }}"></div>
  {% else %}
    <p class="error-message">‚ö† No se encontr√≥ ning√∫n PDF. Verifica el metafield en Shopify.</p>
  {% endif %}
</div>

<!-- üìå Script para Inicializar el FlipBook -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    setTimeout(() => {
        if (typeof FlipBook === "undefined") {
            console.error("‚ùå 3D FlipBook no se ha cargado correctamente.");
            return;
        }

        const flipbookElement = document.getElementById("myFlipbook");

        if (!flipbookElement || !flipbookElement.getAttribute("pdf")) {
            console.error("‚ùå No se encontr√≥ el contenedor del FlipBook o la URL del PDF.");
            return;
        }

        console.log("üöÄ Inicializando 3D FlipBook con PDF:", flipbookElement.getAttribute("pdf"));

        new FlipBook(flipbookElement, {
            pdf: flipbookElement.getAttribute("pdf"),
            template: {
                html: "default",
                styles: ["default"],
                sounds: {
                    startFlip: "https://cdn.jsdelivr.net/npm/3d-flip-book@1.7.0/sounds/start.mp3",
                    endFlip: "https://cdn.jsdelivr.net/npm/3d-flip-book@1.7.0/sounds/end.mp3"
                }
            },
            controls: {
                zoomIn: true,
                zoomOut: true,
                fullScreen: true,
                download: true
            }
        });
    }, 3000);
});
</script>

<!-- üìå Estilos para el FlipBook -->
<style>
/* üìå Estilos para centrar el FlipBook */
#flipbookContainer {
  width: 100%;
  max-width: 800px;
  margin: auto;
  text-align: center;
}

/* üìå Ajustar el tama√±o del FlipBook */
.flip-book {
  width: 100% !important;
  height: 600px !important;
}

/* üìå Mensaje de error */
.error-message {
  color: red;
  font-weight: bold;
  text-align: center;
  margin-top: 20px;
}
</style>
